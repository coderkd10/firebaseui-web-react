(function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addFrameworkForLogging", function() { return addFrameworkForLogging; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cordovaPopupRedirectResolver", function() { return cordovaPopupRedirectResolver; });
/* harmony import */ var _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-e3d5d3f4.js */ "./node_modules/@firebase/auth/dist/esm2017/index-e3d5d3f4.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ActionCodeOperation", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["A"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ActionCodeURL", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["ag"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AuthCredential", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["J"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AuthErrorCodes", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["G"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AuthImpl", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aJ"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AuthPopup", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aM"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EmailAuthCredential", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["K"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EmailAuthProvider", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["Q"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FacebookAuthProvider", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["U"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FactorId", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["F"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FetchProvider", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aN"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "GithubAuthProvider", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["W"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "GoogleAuthProvider", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["V"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OAuthCredential", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["L"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OAuthProvider", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["X"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OperationType", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["O"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PhoneAuthCredential", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["M"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PhoneAuthProvider", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["P"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PhoneMultiFactorGenerator", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["m"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ProviderId", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["p"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecaptchaVerifier", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["R"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SAMLAuthCredential", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aO"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SAMLAuthProvider", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["Y"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SignInMethod", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["S"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TotpMultiFactorGenerator", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["T"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TotpSecret", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["n"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TwitterAuthProvider", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["Z"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "UserImpl", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aI"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "_assert", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aA"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "_castAuth", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aH"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "_fail", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["av"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "_generateEventId", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aL"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "_getClientVersion", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aK"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "_getInstance", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aC"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "_getRedirectResult", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aE"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "_overrideRedirectResult", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aF"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "_persistenceKeyName", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aD"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "applyActionCode", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["a5"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "beforeAuthStateChanged", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["w"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "browserLocalPersistence", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["b"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "browserPopupRedirectResolver", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["k"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "browserSessionPersistence", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["a"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "checkActionCode", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["a6"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "confirmPasswordReset", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["a4"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "connectAuthEmulator", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["I"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createUserWithEmailAndPassword", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["a8"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "debugErrorMap", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["D"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "deleteUser", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["C"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "fetchSignInMethodsForEmail", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["ad"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getAdditionalUserInfo", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["ao"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getAuth", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["o"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getIdToken", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["al"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getIdTokenResult", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["am"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getMultiFactorResolver", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aq"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getRedirectResult", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["j"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "inMemoryPersistence", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["N"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "indexedDBLocalPersistence", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["i"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "initializeAuth", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["H"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "initializeRecaptchaConfig", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["t"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isSignInWithEmailLink", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["ab"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "linkWithCredential", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["a0"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "linkWithPhoneNumber", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["l"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "linkWithPopup", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["d"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "linkWithRedirect", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["g"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "multiFactor", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["ar"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "onAuthStateChanged", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["x"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "onIdTokenChanged", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["v"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "parseActionCodeURL", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["ah"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "prodErrorMap", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["E"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "reauthenticateWithCredential", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["a1"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "reauthenticateWithPhoneNumber", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["r"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "reauthenticateWithPopup", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["e"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "reauthenticateWithRedirect", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["h"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "reload", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["ap"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "sendEmailVerification", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["ae"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "sendPasswordResetEmail", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["a3"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "sendSignInLinkToEmail", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aa"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "setPersistence", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["q"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "signInAnonymously", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["_"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "signInWithCredential", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["$"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "signInWithCustomToken", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["a2"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "signInWithEmailAndPassword", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["a9"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "signInWithEmailLink", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["ac"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "signInWithPhoneNumber", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["s"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "signInWithPopup", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["c"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "signInWithRedirect", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["f"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "signOut", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["B"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "unlink", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["an"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "updateCurrentUser", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["z"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "updateEmail", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aj"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "updatePassword", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["ak"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "updatePhoneNumber", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["u"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "updateProfile", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["ai"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useDeviceLanguage", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["y"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "verifyBeforeUpdateEmail", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["af"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "verifyPasswordResetCode", function() { return _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["a7"]; });

/* harmony import */ var _firebase_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/index.esm2017.js");
/* harmony import */ var _firebase_app__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @firebase/app */ "./node_modules/@firebase/app/dist/esm/index.esm2017.js");
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _firebase_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @firebase/logger */ "./node_modules/@firebase/logger/dist/esm/index.esm2017.js");
/* harmony import */ var _firebase_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @firebase/component */ "./node_modules/@firebase/component/dist/esm/index.esm2017.js");








/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _cordovaWindow() {
    return window;
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * How long to wait after the app comes back into focus before concluding that
 * the user closed the sign in tab.
 */
const REDIRECT_TIMEOUT_MS = 2000;
/**
 * Generates the URL for the OAuth handler.
 */
async function _generateHandlerUrl(auth, event, provider) {
    var _a;
    // Get the cordova plugins
    const { BuildInfo } = _cordovaWindow();
    Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["as"])(event.sessionId, 'AuthEvent did not contain a session ID');
    const sessionDigest = await computeSha256(event.sessionId);
    const additionalParams = {};
    if (Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["at"])()) {
        // iOS app identifier
        additionalParams['ibi'] = BuildInfo.packageName;
    }
    else if (Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["au"])()) {
        // Android app identifier
        additionalParams['apn'] = BuildInfo.packageName;
    }
    else {
        Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["av"])(auth, "operation-not-supported-in-this-environment" /* AuthErrorCode.OPERATION_NOT_SUPPORTED */);
    }
    // Add the display name if available
    if (BuildInfo.displayName) {
        additionalParams['appDisplayName'] = BuildInfo.displayName;
    }
    // Attached the hashed session ID
    additionalParams['sessionId'] = sessionDigest;
    return Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aw"])(auth, provider, event.type, undefined, (_a = event.eventId) !== null && _a !== void 0 ? _a : undefined, additionalParams);
}
/**
 * Validates that this app is valid for this project configuration
 */
async function _validateOrigin(auth) {
    const { BuildInfo } = _cordovaWindow();
    const request = {};
    if (Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["at"])()) {
        request.iosBundleId = BuildInfo.packageName;
    }
    else if (Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["au"])()) {
        request.androidPackageName = BuildInfo.packageName;
    }
    else {
        Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["av"])(auth, "operation-not-supported-in-this-environment" /* AuthErrorCode.OPERATION_NOT_SUPPORTED */);
    }
    // Will fail automatically if package name is not authorized
    await Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["ax"])(auth, request);
}
function _performRedirect(handlerUrl) {
    // Get the cordova plugins
    const { cordova } = _cordovaWindow();
    return new Promise(resolve => {
        cordova.plugins.browsertab.isAvailable(browserTabIsAvailable => {
            let iabRef = null;
            if (browserTabIsAvailable) {
                cordova.plugins.browsertab.openUrl(handlerUrl);
            }
            else {
                // TODO: Return the inappbrowser ref that's returned from the open call
                iabRef = cordova.InAppBrowser.open(handlerUrl, Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["ay"])() ? '_blank' : '_system', 'location=yes');
            }
            resolve(iabRef);
        });
    });
}
/**
 * This function waits for app activity to be seen before resolving. It does
 * this by attaching listeners to various dom events. Once the app is determined
 * to be visible, this promise resolves. AFTER that resolution, the listeners
 * are detached and any browser tabs left open will be closed.
 */
async function _waitForAppResume(auth, eventListener, iabRef) {
    // Get the cordova plugins
    const { cordova } = _cordovaWindow();
    let cleanup = () => { };
    try {
        await new Promise((resolve, reject) => {
            let onCloseTimer = null;
            // DEFINE ALL THE CALLBACKS =====
            function authEventSeen() {
                var _a;
                // Auth event was detected. Resolve this promise and close the extra
                // window if it's still open.
                resolve();
                const closeBrowserTab = (_a = cordova.plugins.browsertab) === null || _a === void 0 ? void 0 : _a.close;
                if (typeof closeBrowserTab === 'function') {
                    closeBrowserTab();
                }
                // Close inappbrowser emebedded webview in iOS7 and 8 case if still
                // open.
                if (typeof (iabRef === null || iabRef === void 0 ? void 0 : iabRef.close) === 'function') {
                    iabRef.close();
                }
            }
            function resumed() {
                if (onCloseTimer) {
                    // This code already ran; do not rerun.
                    return;
                }
                onCloseTimer = window.setTimeout(() => {
                    // Wait two seeconds after resume then reject.
                    reject(Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["az"])(auth, "redirect-cancelled-by-user" /* AuthErrorCode.REDIRECT_CANCELLED_BY_USER */));
                }, REDIRECT_TIMEOUT_MS);
            }
            function visibilityChanged() {
                if ((document === null || document === void 0 ? void 0 : document.visibilityState) === 'visible') {
                    resumed();
                }
            }
            // ATTACH ALL THE LISTENERS =====
            // Listen for the auth event
            eventListener.addPassiveListener(authEventSeen);
            // Listen for resume and visibility events
            document.addEventListener('resume', resumed, false);
            if (Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["au"])()) {
                document.addEventListener('visibilitychange', visibilityChanged, false);
            }
            // SETUP THE CLEANUP FUNCTION =====
            cleanup = () => {
                eventListener.removePassiveListener(authEventSeen);
                document.removeEventListener('resume', resumed, false);
                document.removeEventListener('visibilitychange', visibilityChanged, false);
                if (onCloseTimer) {
                    window.clearTimeout(onCloseTimer);
                }
            };
        });
    }
    finally {
        cleanup();
    }
}
/**
 * Checks the configuration of the Cordova environment. This has no side effect
 * if the configuration is correct; otherwise it throws an error with the
 * missing plugin.
 */
function _checkCordovaConfiguration(auth) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
    const win = _cordovaWindow();
    // Check all dependencies installed.
    // https://github.com/nordnet/cordova-universal-links-plugin
    // Note that cordova-universal-links-plugin has been abandoned.
    // A fork with latest fixes is available at:
    // https://www.npmjs.com/package/cordova-universal-links-plugin-fix
    Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aA"])(typeof ((_a = win === null || win === void 0 ? void 0 : win.universalLinks) === null || _a === void 0 ? void 0 : _a.subscribe) === 'function', auth, "invalid-cordova-configuration" /* AuthErrorCode.INVALID_CORDOVA_CONFIGURATION */, {
        missingPlugin: 'cordova-universal-links-plugin-fix'
    });
    // https://www.npmjs.com/package/cordova-plugin-buildinfo
    Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aA"])(typeof ((_b = win === null || win === void 0 ? void 0 : win.BuildInfo) === null || _b === void 0 ? void 0 : _b.packageName) !== 'undefined', auth, "invalid-cordova-configuration" /* AuthErrorCode.INVALID_CORDOVA_CONFIGURATION */, {
        missingPlugin: 'cordova-plugin-buildInfo'
    });
    // https://github.com/google/cordova-plugin-browsertab
    Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aA"])(typeof ((_e = (_d = (_c = win === null || win === void 0 ? void 0 : win.cordova) === null || _c === void 0 ? void 0 : _c.plugins) === null || _d === void 0 ? void 0 : _d.browsertab) === null || _e === void 0 ? void 0 : _e.openUrl) === 'function', auth, "invalid-cordova-configuration" /* AuthErrorCode.INVALID_CORDOVA_CONFIGURATION */, {
        missingPlugin: 'cordova-plugin-browsertab'
    });
    Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aA"])(typeof ((_h = (_g = (_f = win === null || win === void 0 ? void 0 : win.cordova) === null || _f === void 0 ? void 0 : _f.plugins) === null || _g === void 0 ? void 0 : _g.browsertab) === null || _h === void 0 ? void 0 : _h.isAvailable) === 'function', auth, "invalid-cordova-configuration" /* AuthErrorCode.INVALID_CORDOVA_CONFIGURATION */, {
        missingPlugin: 'cordova-plugin-browsertab'
    });
    // https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-inappbrowser/
    Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aA"])(typeof ((_k = (_j = win === null || win === void 0 ? void 0 : win.cordova) === null || _j === void 0 ? void 0 : _j.InAppBrowser) === null || _k === void 0 ? void 0 : _k.open) === 'function', auth, "invalid-cordova-configuration" /* AuthErrorCode.INVALID_CORDOVA_CONFIGURATION */, {
        missingPlugin: 'cordova-plugin-inappbrowser'
    });
}
/**
 * Computes the SHA-256 of a session ID. The SubtleCrypto interface is only
 * available in "secure" contexts, which covers Cordova (which is served on a file
 * protocol).
 */
async function computeSha256(sessionId) {
    const bytes = stringToArrayBuffer(sessionId);
    // TODO: For IE11 crypto has a different name and this operation comes back
    //       as an object, not a promise. This is the old proposed standard that
    //       is used by IE11:
    // https://www.w3.org/TR/2013/WD-WebCryptoAPI-20130108/#cryptooperation-interface
    const buf = await crypto.subtle.digest('SHA-256', bytes);
    const arr = Array.from(new Uint8Array(buf));
    return arr.map(num => num.toString(16).padStart(2, '0')).join('');
}
function stringToArrayBuffer(str) {
    // This function is only meant to deal with an ASCII charset and makes
    // certain simplifying assumptions.
    Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["as"])(/[0-9a-zA-Z]+/.test(str), 'Can only convert alpha-numeric strings');
    if (typeof TextEncoder !== 'undefined') {
        return new TextEncoder().encode(str);
    }
    const buff = new ArrayBuffer(str.length);
    const view = new Uint8Array(buff);
    for (let i = 0; i < str.length; i++) {
        view[i] = str.charCodeAt(i);
    }
    return view;
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const SESSION_ID_LENGTH = 20;
/** Custom AuthEventManager that adds passive listeners to events */
class CordovaAuthEventManager extends _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aB"] {
    constructor() {
        super(...arguments);
        this.passiveListeners = new Set();
        this.initPromise = new Promise(resolve => {
            this.resolveInialized = resolve;
        });
    }
    addPassiveListener(cb) {
        this.passiveListeners.add(cb);
    }
    removePassiveListener(cb) {
        this.passiveListeners.delete(cb);
    }
    // In a Cordova environment, this manager can live through multiple redirect
    // operations
    resetRedirect() {
        this.queuedRedirectEvent = null;
        this.hasHandledPotentialRedirect = false;
    }
    /** Override the onEvent method */
    onEvent(event) {
        this.resolveInialized();
        this.passiveListeners.forEach(cb => cb(event));
        return super.onEvent(event);
    }
    async initialized() {
        await this.initPromise;
    }
}
/**
 * Generates a (partial) {@link AuthEvent}.
 */
function _generateNewEvent(auth, type, eventId = null) {
    return {
        type,
        eventId,
        urlResponse: null,
        sessionId: generateSessionId(),
        postBody: null,
        tenantId: auth.tenantId,
        error: Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["az"])(auth, "no-auth-event" /* AuthErrorCode.NO_AUTH_EVENT */)
    };
}
function _savePartialEvent(auth, event) {
    return storage()._set(persistenceKey(auth), event);
}
async function _getAndRemoveEvent(auth) {
    const event = (await storage()._get(persistenceKey(auth)));
    if (event) {
        await storage()._remove(persistenceKey(auth));
    }
    return event;
}
function _eventFromPartialAndUrl(partialEvent, url) {
    var _a, _b;
    // Parse the deep link within the dynamic link URL.
    const callbackUrl = _getDeepLinkFromCallback(url);
    // Confirm it is actually a callback URL.
    // Currently the universal link will be of this format:
    // https://<AUTH_DOMAIN>/__/auth/callback<OAUTH_RESPONSE>
    // This is a fake URL but is not intended to take the user anywhere
    // and just redirect to the app.
    if (callbackUrl.includes('/__/auth/callback')) {
        // Check if there is an error in the URL.
        // This mechanism is also used to pass errors back to the app:
        // https://<AUTH_DOMAIN>/__/auth/callback?firebaseError=<STRINGIFIED_ERROR>
        const params = searchParamsOrEmpty(callbackUrl);
        // Get the error object corresponding to the stringified error if found.
        const errorObject = params['firebaseError']
            ? parseJsonOrNull(decodeURIComponent(params['firebaseError']))
            : null;
        const code = (_b = (_a = errorObject === null || errorObject === void 0 ? void 0 : errorObject['code']) === null || _a === void 0 ? void 0 : _a.split('auth/')) === null || _b === void 0 ? void 0 : _b[1];
        const error = code ? Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["az"])(code) : null;
        if (error) {
            return {
                type: partialEvent.type,
                eventId: partialEvent.eventId,
                tenantId: partialEvent.tenantId,
                error,
                urlResponse: null,
                sessionId: null,
                postBody: null
            };
        }
        else {
            return {
                type: partialEvent.type,
                eventId: partialEvent.eventId,
                tenantId: partialEvent.tenantId,
                sessionId: partialEvent.sessionId,
                urlResponse: callbackUrl,
                postBody: null
            };
        }
    }
    return null;
}
function generateSessionId() {
    const chars = [];
    const allowedChars = '1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
    for (let i = 0; i < SESSION_ID_LENGTH; i++) {
        const idx = Math.floor(Math.random() * allowedChars.length);
        chars.push(allowedChars.charAt(idx));
    }
    return chars.join('');
}
function storage() {
    return Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aC"])(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["b"]);
}
function persistenceKey(auth) {
    return Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aD"])("authEvent" /* KeyName.AUTH_EVENT */, auth.config.apiKey, auth.name);
}
function parseJsonOrNull(json) {
    try {
        return JSON.parse(json);
    }
    catch (e) {
        return null;
    }
}
// Exported for testing
function _getDeepLinkFromCallback(url) {
    const params = searchParamsOrEmpty(url);
    const link = params['link'] ? decodeURIComponent(params['link']) : undefined;
    // Double link case (automatic redirect)
    const doubleDeepLink = searchParamsOrEmpty(link)['link'];
    // iOS custom scheme links.
    const iOSDeepLink = params['deep_link_id']
        ? decodeURIComponent(params['deep_link_id'])
        : undefined;
    const iOSDoubleDeepLink = searchParamsOrEmpty(iOSDeepLink)['link'];
    return iOSDoubleDeepLink || iOSDeepLink || doubleDeepLink || link || url;
}
/**
 * Optimistically tries to get search params from a string, or else returns an
 * empty search params object.
 */
function searchParamsOrEmpty(url) {
    if (!(url === null || url === void 0 ? void 0 : url.includes('?'))) {
        return {};
    }
    const [_, ...rest] = url.split('?');
    return Object(_firebase_util__WEBPACK_IMPORTED_MODULE_1__["querystringDecode"])(rest.join('?'));
}

/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * How long to wait for the initial auth event before concluding no
 * redirect pending
 */
const INITIAL_EVENT_TIMEOUT_MS = 500;
class CordovaPopupRedirectResolver {
    constructor() {
        this._redirectPersistence = _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["a"];
        this._shouldInitProactively = true; // This is lightweight for Cordova
        this.eventManagers = new Map();
        this.originValidationPromises = {};
        this._completeRedirectFn = _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aE"];
        this._overrideRedirectResult = _index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aF"];
    }
    async _initialize(auth) {
        const key = auth._key();
        let manager = this.eventManagers.get(key);
        if (!manager) {
            manager = new CordovaAuthEventManager(auth);
            this.eventManagers.set(key, manager);
            this.attachCallbackListeners(auth, manager);
        }
        return manager;
    }
    _openPopup(auth) {
        Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["av"])(auth, "operation-not-supported-in-this-environment" /* AuthErrorCode.OPERATION_NOT_SUPPORTED */);
    }
    async _openRedirect(auth, provider, authType, eventId) {
        _checkCordovaConfiguration(auth);
        const manager = await this._initialize(auth);
        await manager.initialized();
        // Reset the persisted redirect states. This does not matter on Web where
        // the redirect always blows away application state entirely. On Cordova,
        // the app maintains control flow through the redirect.
        manager.resetRedirect();
        Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aG"])();
        await this._originValidation(auth);
        const event = _generateNewEvent(auth, authType, eventId);
        await _savePartialEvent(auth, event);
        const url = await _generateHandlerUrl(auth, event, provider);
        const iabRef = await _performRedirect(url);
        return _waitForAppResume(auth, manager, iabRef);
    }
    _isIframeWebStorageSupported(_auth, _cb) {
        throw new Error('Method not implemented.');
    }
    _originValidation(auth) {
        const key = auth._key();
        if (!this.originValidationPromises[key]) {
            this.originValidationPromises[key] = _validateOrigin(auth);
        }
        return this.originValidationPromises[key];
    }
    attachCallbackListeners(auth, manager) {
        // Get the global plugins
        const { universalLinks, handleOpenURL, BuildInfo } = _cordovaWindow();
        const noEventTimeout = setTimeout(async () => {
            // We didn't see that initial event. Clear any pending object and
            // dispatch no event
            await _getAndRemoveEvent(auth);
            manager.onEvent(generateNoEvent());
        }, INITIAL_EVENT_TIMEOUT_MS);
        const universalLinksCb = async (eventData) => {
            // We have an event so we can clear the no event timeout
            clearTimeout(noEventTimeout);
            const partialEvent = await _getAndRemoveEvent(auth);
            let finalEvent = null;
            if (partialEvent && (eventData === null || eventData === void 0 ? void 0 : eventData['url'])) {
                finalEvent = _eventFromPartialAndUrl(partialEvent, eventData['url']);
            }
            // If finalEvent is never filled, trigger with no event
            manager.onEvent(finalEvent || generateNoEvent());
        };
        // Universal links subscriber doesn't exist for iOS, so we need to check
        if (typeof universalLinks !== 'undefined' &&
            typeof universalLinks.subscribe === 'function') {
            universalLinks.subscribe(null, universalLinksCb);
        }
        // iOS 7 or 8 custom URL schemes.
        // This is also the current default behavior for iOS 9+.
        // For this to work, cordova-plugin-customurlscheme needs to be installed.
        // https://github.com/EddyVerbruggen/Custom-URL-scheme
        // Do not overwrite the existing developer's URL handler.
        const existingHandleOpenURL = handleOpenURL;
        const packagePrefix = `${BuildInfo.packageName.toLowerCase()}://`;
        _cordovaWindow().handleOpenURL = async (url) => {
            if (url.toLowerCase().startsWith(packagePrefix)) {
                // We want this intentionally to float
                // eslint-disable-next-line @typescript-eslint/no-floating-promises
                universalLinksCb({ url });
            }
            // Call the developer's handler if it is present.
            if (typeof existingHandleOpenURL === 'function') {
                try {
                    existingHandleOpenURL(url);
                }
                catch (e) {
                    // This is a developer error. Don't stop the flow of the SDK.
                    console.error(e);
                }
            }
        };
    }
}
/**
 * An implementation of {@link PopupRedirectResolver} suitable for Cordova
 * based applications.
 *
 * @public
 */
const cordovaPopupRedirectResolver = CordovaPopupRedirectResolver;
function generateNoEvent() {
    return {
        type: "unknown" /* AuthEventType.UNKNOWN */,
        eventId: null,
        sessionId: null,
        urlResponse: null,
        postBody: null,
        tenantId: null,
        error: Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["az"])("no-auth-event" /* AuthErrorCode.NO_AUTH_EVENT */)
    };
}

/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
// This function should only be called by frameworks (e.g. FirebaseUI-web) to log their usage.
// It is not intended for direct use by developer apps. NO jsdoc here to intentionally leave it out
// of autogenerated documentation pages to reduce accidental misuse.
function addFrameworkForLogging(auth, framework) {
    Object(_index_e3d5d3f4_js__WEBPACK_IMPORTED_MODULE_0__["aH"])(auth)._logFramework(framework);
}


//# sourceMappingURL=internal.js.map


/***/ })